# Проект Виджета Банковских Операций

## Описание
Это проект виджета, предназначенного для обработки и маскирования данных о банковских операциях клиента. Проект предоставляет функции для маскировки номеров карт и счетов, фильтрации операций по статусу и сортировки операций по дате.

## Установка
1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/ваш-репозиторий

# Тестирование: 
Добавление тестов для модулей `masks` и `processing`

### Описание:
В рамках данного Pull Request были добавлены тесты для следующих функций:
- `get_mask_card_number`: тестирование различных случаев маскирования номеров карт.
- `get_mask_account`: проверка работы с номерами счетов различных форматов.
- `mask_account_card`: тестирование распознавания карт и счетов, а также проверка на некорректные данные.
- `filter_by_state`: тестирование фильтрации операций по статусу.
- `sort_by_date`: проверка сортировки операций по дате в обоих направлениях.

### Покрытие:
- Покрытие тестами 80% кода.
- Использованы фикстуры для создания тестовых данных и параметризация для тестирования различных сценариев.

# Новый функционал

### Генераторы

- `filter_by_currency`: фильтрация транзакций по валюте.
- `transaction_descriptions`: возвращает описание каждой транзакции.
- `card_number_generator`: генерация номеров карт в формате XXXX XXXX XXXX XXXX.

### Примеры использования

#### filter_by_currency
```python
transactions = [...]  # Список транзакций
usd_transactions = filter_by_currency(transactions, "USD")
for _ in range(2):
    print(next(usd_transactions))
```
#### transaction_descriptions
```python
descriptions = transaction_descriptions(transactions)
for _ in range(5):
    print(next(descriptions))
```
#### card_number_generator
```python
for card_number in card_number_generator(1, 5):
    print(card_number)
```

# Логирование с использованием декоратора log

В проект был добавлен новый модуль decorators, содержащий декоратор log. Этот декоратор позволяет автоматически логировать выполнение функций, как в файл, так и в консоль.

# Функциональность декоратора
Декоратор log выполняет следующие задачи:

1. Логирование начала и окончания работы функции:

- В случае успешного выполнения функции, в лог записывается сообщение вида ИмяФункции ok.
2. Логирование ошибок:

- Если во время выполнения функции возникает ошибка, декоратор записывает в лог сообщение об ошибке с типом ошибки и входными параметрами функции.
3. Гибкость логирования:

- Если декоратор вызывается с параметром filename, логи записываются в указанный файл.
Если параметр filename не задан, логи выводятся в консоль.
- овый функционал
Работа с финансовыми транзакциями
### Загрузка транзакций из JSON-файла:

1. Реализована функция, которая принимает на вход путь до JSON-файла и возвращает список словарей с данными о финансовых транзакциях.
2. Если файл пустой, содержит не список или не найден, функция возвращает пустой список.
3. Функция помещена в модуль utils.
4. Файл с данными о финансовых транзакциях operations.json должен находиться в директории data/ в корне проекта.
### Конвертация валют:

1. Реализована функция, которая принимает на вход транзакцию и возвращает сумму транзакции (amount) в рублях (тип данных — float).
2. Если транзакция была в USD или EUR, происходит обращение к внешнему API для получения текущего курса валют и конвертации суммы операции в рубли.
3. Для конвертации валюты используется Exchange Rates Data API: https://apilayer.com/exchangerates_data-api.
4. Функция конвертации помещена в модуль external_api.
### Безопасность данных:

1. Используются переменные окружения из файла .env для сокрытия чувствительных данных (токенов доступа для API).
2. Создан шаблон файла .env, который размещен в репозитории на GitHub.
### Тестирование:

1. Написаны тесты для новых функций с использованием Mock и patch.

Основные функции
Поддержка различных источников данных:

Загрузка транзакций из JSON-файлов.
Загрузка транзакций из CSV-файлов.
Загрузка транзакций из Excel (XLSX) файлов.